(function(g){jQuery.browser={};jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase());if(!Array.prototype.indexOf){Array.prototype.indexOf=function(x){var w=this.length>>>0;var y=Number(arguments[1])||0;y=(y<0)?Math.ceil(y):Math.floor(y);if(y<0){y+=w}for(;y<w;y++){if(y in this&&this[y]===x){return y}}return -1}}var v=[];var l=[];var h=0;var e=false;var t="";var u="";var c="";var r="";var n="";var p=0;var d=0;var a={onComplete:function(){},backgroundColor:"#000",barColor:"#fff",overlayId:"qLoverlay",barHeight:1,percentage:false,deepSearch:true,completeAnimation:"fade",minimumTime:500,onLoadComplete:function(){if(a.completeAnimation=="grow"){var x=500;var w=new Date();if((w.getTime()-d)<a.minimumTime){x=(a.minimumTime-(w.getTime()-d))}g(r).stop().animate({width:"100%"},x,function(){g(this).animate({top:"0%",width:"100%",height:"100%"},500,function(){g("#"+a.overlayId).fadeOut(500,function(){g(this).remove();a.onComplete()})})})}else{g("#"+a.overlayId).fadeOut(500,function(){g("#"+a.overlayId).remove();a.onComplete()})}}};var f=function(w){t=w;e=false;var x=new Date();d=x.getTime();if(v.length>0){j();m()}else{s()}};var j=function(){u=g("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"});for(var w=0;l.length>w;w++){g.ajax({url:l[w],type:"HEAD",complete:function(x){if(!e){b(this["url"])}}})}};var b=function(w){var x=g("<img />").attr("src",w).appendTo(u);i(x)};var i=function(w){p++;w.bind("load error",function(){o()})};var o=function(){h++;var w=(h/p)*100;g(r).stop().animate({width:w+"%",minWidth:w+"%"},200);if(a.percentage==true){g(n).text(Math.ceil(w)+"%")}if(h==p){s()}};var s=function(){g(u).remove();e=true;a.onLoadComplete()};var m=function(){var w="absolute";if(t.prop("tagName")=="BODY"){w="fixed"}else{t.css("position","relative")}c=g("<div id='"+a.overlayId+"'></div>").css({width:"100%",height:"100%",backgroundColor:a.backgroundColor,backgroundPosition:"fixed",position:w,zIndex:666999,top:0,left:0}).appendTo(t);r=g("<div id='qLbar'></div>").css({height:a.barHeight+"px",marginTop:"-"+(a.barHeight/2)+"px",backgroundColor:a.barColor,width:"0%",position:"absolute",top:"50%"}).appendTo(c);if(a.percentage==true){n=g("<div id='qLpercentage'></div>").text("0%").css({height:"40px",width:"100px",position:"absolute",fontSize:"3em",top:"50%",left:"50%",marginTop:"-"+(59+a.barHeight)+"px",textAlign:"center",marginLeft:"-50px",color:a.barColor}).appendTo(c)}if(!v.length){s()}};var q=function(z){var x="";var C=g(z);var A="normal";if(C.css("background-image")!="none"){var x=C.css("background-image");var A="background"}else{if(typeof(C.attr("src"))!="undefined"&&z.nodeName.toLowerCase()=="img"){var x=C.attr("src")}}if(x.indexOf("gradient")==-1){x=x.replace(/url\(\"/g,"");x=x.replace(/url\(/g,"");x=x.replace(/\"\)/g,"");x=x.replace(/\)/g,"");var B=x.split(", ");for(var y=0;y<B.length;y++){if(B[y].length>0&&v.indexOf(B[y])==-1&&!B[y].match(/^(data:)/i)){var w="";if(g.browser.msie&&g.browser.version<9){w="?"+Math.floor(Math.random()*3000);l.push(B[y]+w);v.push(B[y])}else{v.push(B[y]);if(A=="background"){l.push(B[y]+w)}else{i(C)}}}}}};g.fn.queryLoader2=function(w){if(w){g.extend(a,w)}this.each(function(){q(this);if(a.deepSearch==true){g(this).find("*:not(script)").each(function(){q(this)})}});f(this);return this};var k={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(z){for(var w=0;w<z.length;w++){var x=z[w].string;var y=z[w].prop;this.versionSearchString=z[w].versionSearch||z[w].identity;if(x){if(x.indexOf(z[w].subString)!=-1){return z[w].identity}}else{if(y){return z[w].identity}}}},searchVersion:function(x){var w=x.indexOf(this.versionSearchString);if(w==-1){return}return parseFloat(x.substring(w+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};k.init();jQuery.browser.version=k.version})(jQuery);